# 智能科技日历项目 - 系统架构设计

## 1. 系统概述

智能科技日历是一个现代化的日历应用，具备实时时钟显示、事件管理、生日提醒、值日表管理等功能，并支持多种通知方式。系统采用前后端分离架构，前端使用Vue.js构建响应式界面，后端使用Node.js提供API服务，数据存储使用SQLite数据库。

## 2. 技术栈选择

### 前端技术栈
- **框架**: Vue.js 3
- **构建工具**: Vite
- **UI组件库**: Element Plus
- **路由**: Vue Router
- **HTTP客户端**: Axios
- **时间处理**: Moment.js

### 后端技术栈
- **运行环境**: Node.js
- **Web框架**: Express
- **数据库**: SQLite3
- **身份验证**: JWT (JSON Web Token)
- **密码加密**: bcrypt
- **邮件服务**: Nodemailer

### 通知系统
- **WxPusher**: 微信推送服务
- **邮件通知**: Nodemailer
- **Telegram通知**: Telegram Bot API

## 3. 系统架构图

```
+------------------+        +------------------+        +------------------+
|                  |        |                  |        |                  |
|  客户端 (浏览器)  | <----> |  后端API服务器   | <----> |  SQLite数据库    |
|                  |        |                  |        |                  |
+------------------+        +------------------+        +------------------+
                                    |
                                    |
                                    v
                            +------------------+
                            |                  |
                            |   通知服务系统   |
                            |                  |
                            +------------------+
                                    |
                                    |
                    +---------------+---------------+
                    |               |               |
            +-------v------+ +------v-------+ +-----v--------+
            |              | |              | |              |
            |   WxPusher   | |    邮件      | |   Telegram   |
            |              | |              | |              |
            +--------------+ +--------------+ +--------------+
```

## 4. 模块划分

### 前端模块
1. **核心模块**
   - 应用初始化
   - 路由管理
   - 状态管理
   - API请求封装

2. **用户界面模块**
   - 实时时钟组件
   - 日历视图组件
   - 事件管理组件
   - 生日提醒组件
   - 值日表组件
   - 通知设置组件

3. **管理员界面模块**
   - 用户管理
   - 系统设置
   - 值日表管理
   - 通知配置

### 后端模块
1. **核心模块**
   - 应用初始化
   - 路由管理
   - 中间件配置
   - 数据库连接

2. **API模块**
   - 用户认证API
   - 事件管理API
   - 生日管理API
   - 值日表管理API
   - 通知设置API

3. **服务模块**
   - 通知服务
   - 定时任务服务
   - 数据验证服务

## 5. 数据流程

1. **事件创建流程**
   - 用户在前端创建事件
   - 前端发送请求到后端API
   - 后端验证请求并存储事件数据
   - 后端创建相关通知任务
   - 返回成功响应给前端

2. **通知触发流程**
   - 定时任务检查需要发送的通知
   - 根据用户设置选择通知方式
   - 调用相应的通知服务发送通知
   - 记录通知发送状态

3. **值日表更新流程**
   - 管理员在后台更新值日表
   - 后端更新值日表数据
   - 创建相关通知任务
   - 用户可在前端查看最新值日表

## 6. 安全设计

1. **用户认证**
   - 使用JWT进行身份验证
   - 密码使用bcrypt加密存储
   - 实现权限控制机制

2. **数据安全**
   - 输入验证和过滤
   - 防止SQL注入攻击
   - 敏感数据加密存储

3. **API安全**
   - 实现请求频率限制
   - CORS配置
   - 防止CSRF攻击

## 7. 部署架构

系统设计为可在低配置VPS上运行，最低配置要求：
- CPU: 1核
- 内存: 1GB
- 存储: 10GB
- 操作系统: Linux (Ubuntu/CentOS)

部署方式：
1. 直接部署: 在VPS上直接安装Node.js环境并运行应用
2. Docker部署: 使用Docker容器化应用，便于一键部署

## 8. 扩展性考虑

1. **模块化设计**
   - 各功能模块松耦合
   - 便于添加新功能或修改现有功能

2. **配置化**
   - 关键参数可通过配置文件调整
   - 无需修改代码即可适应不同环境

3. **API版本控制**
   - 实现API版本管理
   - 确保向后兼容性
